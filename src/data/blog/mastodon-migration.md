---
pubDatetime: 2025-12-26T06:42:27.229Z
modDatetime: 2025-12-26T06:42:27.229Z
title: Mastodon移行記録
featured: false
draft: true
tags:
  - mastodon tech
description:
  setumei
---

## Table of contents

NOTE: かきかけ

長いこと放置していたMastodonの移行・アップデートをした。

不安なので友人に立ち会いのお手伝いをお願いした。

### 現状、および移行後の説明

#### 現状

- サービス事業者: GMO の ConoHa VPS
    - OS: Ubuntu 22.04
- Mastodon: v4.1.5
    - Ruby: v3.2.2
    - Node.js: v
#### 移行後

### 移行作業用プロジェクトを作成

自分一人で作業したわけではなく、お手伝いをお願いしたので、情報共有がしやすいようにする必要があった。
そこで、GitHubでプライベートリポジトリを作成し、そこに情報をまとめて見やすいようにした。

ざっくり次のようなラベルを貼って作業した。

- 移行準備
- 移行当日作業
- 移行後

#### 移行準備



### 本番当日


- 長いこと放置していたMastodonの移行、アプデをしたこと
    - ミドルウェアも上げた
        - DB
        - Redis
- 違う事業者にした
    - ConoHaから
    - KAGOYA CLOUD VPSに
- メディアファイルはS3の日本リージョンのまま
- 何をしらべたか
- 大変だった点
    - :fuan:
- 性質上不安になりやすいので不安のAAを作った
    - 絵文字ジェネレータ(.ninja)のやつから画像を作りrasciiで加工

## おまけ

```txt
                                          w****t
 I]]]]]]]]]]]]]]]]]]]]]]]]?              l******l
 m*************************X             t******t
 ***************************    ]Xzzzzzzzm******mzzzzzzzX]
/***************************/  j**************************/             ]0888d/
/***************************/  v**************************v            ~*******f
l***************************i  ****************************            /********
 ***************************   ****************************            t********
 ]XXXXXXXXXX@*******XXXXXXX    ****************************            /*******#
            *******#           ****************************            j********
           v******a            q*****   :tt}~:       *****q             *******
          _*******t            t****m   *****X       m****t             *******
          Z*******             }****]  X******       ]****?             *******
         X*******o               ?]l   *******         ]?               *******
        x********o             IcXXXXXZ******mXXXXXXXXXXXcl             *******
       r*********o}Lv          p**************************p             *******
      ]**********o***0         ****************************             *******
     l****************aI       ****************************             *******
     w*****************m       ****************************             *******
   <d********************l     ****************************             *******
  <m*********************q:    t**************************t             *******
 ?*********W**************m        x*******     m******                 *******
l*********mB*****oh*********;      m******     <******o                 ******#
X*********IB*****o_*********z     ]******X     *******                   *****t
*********? B*****o ?#********    l********Xl  t******m                   &****x
********~  B*****o  ~********    t**********L}*******t                   :ttt~
X*****m    B*****o   ]******U    t*******************
t*****1    B*****o    ?*****]    x******************]
<****x     B*****o     U***a      ]****************m                     l]]]]
 m**]      B*****o      X*#        ]**m************m<                    *****t
 ,~:       B*****o       -:         : :C*************v                  *******
           B*****o                  jX*****************/                *******
           B*****o               tX*********************f               *******
           B*****o              #************************x              ******#
           B*****o              **************tX**********              ?*****X
           B*****o              ************L[  }L********               }tttt:
           B*****o              **********Xl      t******?
           C*****?              Y*******zI         t****X
           t*****                &***X|             ?&**]
           <XB8B|                I]]                 l]l
```


